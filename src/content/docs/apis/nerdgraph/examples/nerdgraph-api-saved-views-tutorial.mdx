---
title: "NerdGraph tutorial: Run NRQL queries asynchronously"
tags:
  - APIs
  - NerdGraph
  - Examples
  - Infrastructure
  - SavedViews
metaDescription: Examples of using New Relic's NerdGraph API to view, create, and rename saved views.
---

You can use [NerdGraph](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph) to view your personal (private) or shared saved views, create shared or private saved views, and update saved views. 

## Requirements [#requirements]
* [General NerdGraph requirements](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#authentication)

## Understand fields in NerdGraph explorer

You can view field definitions in [NerdGraph explorer](/docs/apis/nerdgraph/get-started/introduction-new-relic-nerdgraph/#explorer), but it may help to better understand the `LOCATION`, `PERIOD`, `TAGS`, and other fields.  

## Saved Views **viewSearch**

  <Collapser
    id="read-saved-views-example"
    title="Read saved views example: `viewSearch`"
  >

The `viewSearch` is used to retrieve saved views by applying a set of query filters. It can take `cursor`, `filter`, `limit` and `orderBy`.

**filter**

The filter field has many of the same options to filter and sort by that other 

_capabilities_

The filter field `capabilities` is an optional array of strings that filters by the text and returns the capability to which the Saved Views belongs. For example, if you provide `infrastructure.hosts`, the Saved Views returned willb e filtered to saved views that belong to the "infrastructure.hosts" page. 

_accounts_

The filter field `accounts` takes in an array of one or many account IDs by which to filter Saved Views.

_filterFavorites_

The filter field `filterFavorites` will filter by favorited Saved Views (true) or not favorited Saved Views (false).

_ids_

The filter field `ids` will filter based on an array of provided Saved View IDs.

_owners_

The filter field `owners` takes in an array of New Relic user IDs. This will return all Saved Views created by those users.

_searchText_

The filter field `searchText` takes in a string and allows saved views that contain the provided text string in the query or in the name.

**orderBy**

_sortBy_

The order by field `sortBy` takes in one enum of `ASC` or `DESC`.

_field_

The order by field `field` takes in one enum of `CREATED`, `NAME`, or `QUERY`. `CREATED` will sort based on the creation date. `NAME` will sort the list based on the view name. `QUERY` will sort the list based on the query parameters.

**cursor**

String used to fetch the following page if it exists. Note that when this is not null, order and limit will be ignored.

**limit**

Allows you to restrict the number of Saved View results returned.

## Results

Results is where the options returned from the search query are picked.

**visibility**

The  `visibility` field is a required enum consisting of either `SHARED` or `PRIVATE`. This determines whether the Saved View is available to just you (`PRIVATE`) or is available account wide (`SHARED`).

**name**

The `name` field is a optional string allowing the filtering of Saved Views by name string. 

**id**

The `id` is a field referring to the identifier of a specifc Saved View.

**context**

The `context` field only has one option: `additionalData` to get return data on metadata of the Saved View.

_additionalData_

The `context` object with the `additionalData` field is the query context including metadata about a given saved view. Additional data is unstructured arbitrary data associated with the Saved View. One example for addtional data is platform level filters like time or user preferences associated with the Saved View.

### createdByUser

The `createdByUser` field is to retrieve the user that created the Saved View. If the Saved View is `PRIVATE`, the user will be you. If it is a `SHARED` view, the user will be the person who created the Saved View. 

## Read saved views example

Here's an example of an read `query` NerdGraph call.

```graphql
{
  actor {
    savedViews {
      viewSearch(filter: {capabilities: "infrastructure.hosts"}, limit: 30, orderBy: {direction: DESC, field: CREATED}) {
        results {
          capability
          visibility
          name
          id
          filter
          favorite
          context {
            additionalData
          }
          createdByUser {
            name
          }
        }
        totalCount
      }
    }
  }
}
```

  </Collapser>

## Create saved views example

Here is an example of an `mutation` to create saved views
Necessary params:
* account

```graphql
mutation CreateSavedView {
  savedViewsCreate(
    account: 11073849,
    favorite: false,
    filter: "domain = 'INFRA' AND type = 'HOST'",
    name: "Test addtionalData View",
    visibility: PRIVATE,
    capability: "infrastructure.hosts",
    additionalData: "{\"a\":\"b\",\"c\":\"d\"}") {
        id
        failures {
        type
        message
        }
  }
}
```

## Update saved views example

Here is an example of an `mutation` to update saved views.

Important details:
* The `id` comes from the id assigned to the saved view
* The `account` argument must match the `account` argument from the original query.
* This `capability` is specificly identifying where the saved view is used.
* The  `favorite` is a boolean value representing if the view is a favorite.
* The `additionalData` is a unsigned JSON string. 
* Requesting `failures` will return the `type` and `message` if a failure occurs.

```graphql
mutation UpdateSavedView {
  savedViewsUpdate(id: "44bfc04f-0069-4066-97ff-377d21b13f91", capability: "infrastructure.hosts", favorite: true, additionalData: "{ test: \"string\" }") {
    failures {
      type
      message
    }
  }
}
```

## Delete saved views example

Here is an example of deleting a saved view. You are only able to delete a private view, not a shared view.

```graphql
mutation DeleteSavedView {
  savedViewsDelete(id: "4d4f0503-b7c4-47f2-b549-eda7222a4d73") {
    failures {
      type
      message
    }
  }
}
```

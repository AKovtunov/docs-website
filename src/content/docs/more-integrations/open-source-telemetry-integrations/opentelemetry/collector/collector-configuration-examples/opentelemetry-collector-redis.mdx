---
title: Collector for Redis
tags:
  - Integrations
  - Open source telemetry integrations
  - OpenTelemetry
  - Redis
metaDescription: You can collect redis metrics using the OpenTelemetry collector.
---
import infrastructureRedisOTELDashboard from 'images/infrastructure_screenshot-crop_redis-otel-dashboard.webp'

You can collect metrics about your Redis instance with the OpenTelemetry collector. The collector is a component of OpenTelemetry that collects, processes, and exports telemetry data to New Relic (or any observability backend).

The Redis receiver is designed to retrieve Redis INFO data from a single Redis instance, build metrics from that data, and send them to the next consumer at a configurable interval.

You can view this [metric data](#data) in pre-built dashboards, create alert policies, and create custom queries and charts.

<img
  title="Redis OpenTelemetry quickstart dashboard"
  alt="Image of the dashboard available through the Redis OpenTelemetry quickstart"
  src={infrastructureRedisOTELDashboard}
/>


<Callout variant="tip">
  If you're looking for help with other collector use cases, see the [newrelic-opentelemetry-examples](https://github.com/newrelic/newrelic-opentelemetry-examples) repository.
</Callout>

Complete the steps below to collect metrics from Redis:

## Step 1: Sign up for your free account if you haven't already [#signup]

<InlineSignup />

## Step 2: Prerequisites [#prerequisites]

The collector will use the [redis receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/redisreceiver) component (minimum version recommended v0.83.0), and it requires access to Redis through an endpoint.

## Step 3: Install OpenTelemetry collector [#install-opentelemetry-collector]

Download and install the OpenTelemetry collector following [OpenTelemetry docs](https://opentelemetry.io/docs/collector/getting-started/).

You will need to install [OpenTelemetry Collector Contrib Distro](https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-contrib) or other distribution including, at least, the following components:

* [Redis receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/redisreceiver)
* [OTLP exporter](https://pkg.go.dev/go.opentelemetry.io/collector/exporter/otlpexporter)
* [Attribute processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/attributesprocessor/README.md)
* [Resource processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/resourceprocessor/README.md)
* [Resource detection processor](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/resourcedetectionprocessor/README.md)

## Step 4: Configure OpenTelemetry collector [#configure-opentelemetry-collector]

Update or create a new file called `config.yaml` from the example below.

Notice that, since no identificator is attached by the OTel receiver to redis metrics, an attribute processor is needed to decorate metrics with `server.address` and `server.port` metadata. 
The attributes `server.address` and `server.port` are needed to be able to query and facet data differentiating between Redis servers and to create NewRelic entities. 

Moreover, separate pipelines with different instances of `resource/redis_metrics` are needed in case multiple Redis servers are monitored from a single otel collector to decorate each instance with the corresponding metadata.


Replace the `NEW_RELIC_LICENSE_KEY` in the file with your own values. For more info, see the [New Relic License key](/docs/apis/intro-apis/new-relic-api-keys/#license-key).

```yaml
receivers:
  redis:
    endpoint: "{redis_hostname}:{redis_port}"
    metrics:
      # Enable redis.maxmemory optional metric
      redis.maxmemory:
        enabled: true

processors:
  # This is needed since redis receiver is not currently adding any means to understand to which redis server the metrics are referring to 
  attributes/redis_metrics:
    include:
      match_type: regexp
      metric_names:
        # If you are installing with Helm the regex should be escaped further "redis\\..*"
        - "redis\..*" 
    actions:
      - action: upsert
        key: server.address
        value: "{redis_hostname}"
      - action: upsert
        key: server.port
        value: {redis_port}
  # resource and resource-detection processors allow decorating the metrics with host attributes
  resource:
    attributes:
      - key: host.id
        from_attribute: host.name
        action: insert
  resourcedetection:
    detectors: ["env", "system"]
  resourcedetection/cloud:
    detectors: ["gcp", "ec2", "azure"]
    timeout: 2s
    override: false

exporters:
  otlp:
    endpoint: https://otlp.nr-data.net:443
    headers:
      api-key: NEW_RELIC_LICENSE_KEY

service:
  telemetry:
    logs:
  pipelines:
    metrics:
      receivers: [redis]
      processors:
        - resourcedetection
        - resourcedetection/cloud
        - resource
        - attributes/redis_metrics
      exporters: [otlp]
```


For further configuration options, please review:
* [Redis receiver documentation](https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/redisreceiver#configuration)
* [Opentelemetry Collector documentation](https://opentelemetry.io/docs/collector/configuration/)
* [Batch processor](https://github.com/open-telemetry/opentelemetry-collector/blob/main/processor/batchprocessor/README.md)

## Step 5: Run the collector [#run-collector]

Run the OpenTelemetry collector (the way to run it may vary depending on the chosen installation method). Example:

```yaml
/usr/bin/otelcol-contrib --config ./config.yaml
```

## Step 6: Find and use your data

### Take advantage of our entities driven experiences

Telemetry data originating from the OpenTelemetry Redis receiver, if properly decorated, generates redis entities.
[Entities](/docs/new-relic-solutions/new-relic-one/core-concepts/what-entity-new-relic/) are anything that reports data to New Relic and is identified by an unique entity ID.

Your monitored entities are the drivers of features like Entity Explorer, Workloads, and Lookout.
Check this [document](/docs/new-relic-solutions/new-relic-one/core-concepts/new-relic-explorer-view-performance-across-apps-services-hosts/) for more information on how to get benefited from these experiences.

### Explore and query your data [#data]

You may use the [metrics explorer](/docs/query-your-data/explore-query-data/browse-data/introduction-data-explorer) to check the metrics being ingested. All metrics reported by the redis receiver start by the `"redis."` prefix.

The following NRQL queries show examples to help you query the metrics you received:

* Listing number of metric updates ingested by metric name:

  ```sql
  SELECT count(*) FROM Metric WHERE metricName LIKE 'redis.%' and instrumentation.provider='opentelemetry' facet metricName LIMIT max
  ```

* Querying a specific metric faceted by host:

  ```sql
    SELECT average(redis.commands.processed) FROM Metric WHERE instrumentation.provider='opentelemetry' FACET host.name TIMESERIES
  ```

* Listing dimensions available for a given metric:

  ```sql
  SELECT keyset() FROM Metric WHERE metricName = 'redis.commands.processed'
  ```

### Install quickstart [#quickstart]

Take advantage of the Redis dashboard included in the [Redis Open Telemetry Quickstart](https://newrelic.com/instant-observability/redis-otel) to easily monitor your Redis infrastructure thanks to the predefined graphs and filters.

### Metric data

For a list of all the supported metrics, please refer to [the redis receiver metrics reference](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/redisreceiver/documentation.md).

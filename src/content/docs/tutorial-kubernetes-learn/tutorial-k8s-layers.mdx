---
title: Understand and monitor Kubernetes clusters
---

import k8sDiagramContext from 'images/tutorials_diagram_kubernetes-overview.webp'

import tutorialOverviewdashboard from 'images/tutorial_screenshot-full_overview-dashboard.webp'

import tutorialOverviewDeployments from 'images/tutorial_screenshot-full_overview-deployments.webp'

import tutorialOverviewFailed from 'images/tutorial_screenshot-crop_failed-pods.webp'

import tutorialAPMOverview from 'images/tutorial_screenshot-full_apmK8s.webp'

import tutorialAPMPerformance from 'images/tutorial_screenshot-full_apm-k8s-performance.webp'

Let's review what makes up a Kubernetes system and explore how New Relic can help you understand your system at a cluster-wide level.

## Break it apart to understand

Let's break a Kubernetes system into distinct layers first.

<img
    title="k8sDiagramContext"
    alt="an image showing an abstracted view of a kubernetes system. This includes pods, apps, and clusters"
    src={k8sDiagramContext}
/>

We'll discuss a Kubernetes system in three key sections. 

  * **The cluster**: this represents the entire Kubernetes system. The cluster contains multiple deployments, which in turn house many pods. Each pod contains its individual services and applications.

  * **The orchestrated**: these are the core elements of a Kubernetes system. Orchestrated components consist of entire deployments that spin pods up and down as needed.

  * **The services and applications**: services and applications are the workhorses of the Kubernetes system. Within a Kubernetes system each pod houses one or more services and applications. The services and applications provide the essential functionality that drives the system. This could be computation, a web app, or any other application.

It's important to note that these sections interalate with each other. The cluster contains multiple orchestrated layers, and each orchestrated section consists of multiple service and application layers.

<Callout variant="important">
There are many ways you can split up a Kubernetes system to understand it; these layers are just one way to think of your system. 
</Callout>

##  Understand and monitor the cluster layer

In a large Kubernetes system, with numerous deployments and pods, manually monitoring each component becomes impractical. You might be dealing with dozens or hundred of deployments, which in turn means you might have to monitor hundreds or thousands of individual pods. New Relic offers a more efficient approach to oversee the entire system's health and receive timely alerts when issues arise.

The following steps guide your through a general monitoring strategy for your cluster:

<Steps>
    <Step>
### Go to the Kubernetes overview dashboard

Go to **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > Kubernetes > Overview Dashboard**. Be sure to scroll down to see all the graphs available to you.

If you don't see any data, [make sure you set up your monitoring ](/docs/tutorial-kubernetes-learn/tutorial-k8s-intro/#install-new-relic-agent) in the previous tutorial.
    </Step>
    <Step>

### Triage your cluster

The Kubernetes overview dashboard shows your high level data about your cluster. You can find general data such as the count of pods and services, but more importantly you can find data about the health of your cluster such as the percent of pods running, the count of failed pods, the number of container restarts, and more. 
<img
    title="tutorialOverviewdashboard"
    alt="The main overview dashboard for the kubernetes capability"
    src={tutorialOverviewdashboard}
/>



Use this dashboard to gauge the general health of your cluster. Here are a few things to look for:



<table>
    <thead>
        <tr>
            <th>
                Component
            </th>
            <th>
                What it indicates
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
Red or yellow tiles
            </td>
            <td>
Yellow tiles are warnings. Keep an eye on what they refer to. For example, if you have 2 unhealthy deployments you should take note and plan to troubleshoot those deployments. 

Red tiles are critical alerts. These aren't necessarily failures in your system, but you should prioritize addressing them as immediately as possible.  
            </td>
        </tr>
        <tr>
            <td>
Anomalous spikes in graphs
            </td>
            <td>
there are various graphs that show things such as pending pods over time or even memory utilization over time. 

Spike are fairly normal, such as the spikes in the **Kubernetes Warning Events by Reason** graph in the screenshot above. These spikes happen regularly about every 5 minutes so they are no cause for concern. Look for spikes that happen outside of regular patterns or spike in a much larger magnitude than normal. 
            </td>
        </tr>
        <tr>
            <td>
Node readiness
            </td>
            <td>
Observe whether nodes in the cluster are ready and able to host pods. Ensure that your cluster's infrastructure is prepared to handle workloads without any bottlenecks.
            </td>
        </tr>
        <tr>
            <td>
Resource count insights
            </td>
            <td>
kKep a close eye on the number of pods, containers, nodes, or other Kubernetes resources within the cluster. While you won't always find something actionable, monitoring resource utilization allows you to plan for future scaling.
            </td>
        </tr>
    </tbody>
</table>

Use the time selector in the top left of the page to see your data across time ranges to verify any troubling data isn't just random or to triage across a longer timeframe. 

    </Step>
</Steps>

### Understand and monitor the service and application layer

In your kubernetes system, each pod contains services and applications that provide the actual functionality that your kubernetes system supports. The system could support computation, a web app, or anything inbetween.

The following steps guide you through a general strategy to monitor your applications and services:

<Steps>
    <Step>
### Navigate to the APM Kubernetes dashboard

Go to **[one.newrelic.com > All capabilities](https://one.newrelic.com/all-capabilities) > APM & Services > select your application > Kubernetes**.     
    </Step>
    <Step>
### Triage your application

This page shows you a general overview of all the instances of that application within your Kubernetes cluster. There are various useful charts and graphs here, but take a close look at the activity stream on the far right. This will highlight any important performance events of those applications. Increase the time range as necessary to gather a full view of the performance history.

 Only you can decide what's acceptable, but multiple events a day indicates you could improve performance. For example, in the image above there are multiple Apdex warnings within just a few hours. [Apdex warnings indicate a degraded user experience](/docs/apm/new-relic-apm/apdex/apdex-measure-user-satisfaction/). 

<img
    title="tutorialAPMOverview"
    alt="The main overview dashboard for an APM service in a Kubernetes cluster"
    src={tutorialAPMOverview}
/>
    </Step>
    <Step>
### Identify the cause of performance issues 

Scroll down until you see four graphs. On the top left of each graph, select the dropdown and set the graphs to the following:
* Service error rate
* Service throughput
* Service response time
* Container restart count

<img
    title="tutorialAPMOverview"
    alt="The main overview dashboard for an APM service in a Kubernetes cluster"
    src={tutorialAPMPerformance}
/>

The first three graphs will show you the health of your applications. The restart count graph helps you correlate if your performance has any affect on your general pod health.

In the screenshot above we can note a few things:
* The error rate stays at zero, which means errors are not affecting performance
* The service throughput spikes extremely often
* The service response time regularly fluctutes close to 70ms 
* The container restart graph stays at zero, which means the performance of my applications is not causing critical failures in my cluster

In this case, you can identify throughput and response time as the key indicators of your degraded performance. There are many ways to solve these from optimizing the application itself or just throwing more CPU power at the containers hosting the application.

    </Step>
</Steps>

## What's next?

Now that you've learned how to use New Relic to monitor Kubernetes, you can explore our other tutorials:


* Is your app running slow? Learn how to triage and diagnose latency in your app with our [My app is slow](docs/tutorial-app-slow/root-causes) tutorial.
* If you have a peak demand day coming up, learn how New Relic can help you with [capacity planning](/docs/tutorial-peak-demand/get-started).
* Do you want to create high quality alerts? Our [alerts tutorial](/docs/tutorial-create-alerts/create-new-relic-alerts/) can help you set up an alerting system.  

<UserJourneyControls
    previousStep={{path: "docs/tutorial-kubernetes-learn/tutorial-k8s-intro", title: "Previous step", body: "Learn about Kubernetes monitoring."}}
/>

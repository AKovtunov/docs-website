---
title: Customize mobile instrumentation
tags:
  - Mobile monitoring
  - API guides
metaDescription: 'To start interaction traces, send custom data, or manually instrument your mobile app code, use the iOS SDK API.'
---

While our mobile monitoring solution offers power out-of-the-box data collection, you may need to customize and extend the data your mobile app reports to New Relic, such as:

* Start and stop interaction traces from events in your mobile app
* Record custom metrics
* Send custom attributes and events
* Track network requests from libraries not supported automatically.
* Set custom IDs to user sessions

These customizations are available as public SDK API calls for our iOS and Android agents.

Our hybrid mobile agents (React Native, Xamarin, etc.) utilize these public iOS and Android SDK API calls, so if you're looking to customize your hybrid agent, do <xyz>. 

## Get started

1. If you don't already have the latest mobile agent installed, do <xyz> to update to the latest version.
2. Review our available mobile SDKs and select one.
3. Copy and paste the API method to your code, making sure to wrap the method in start/stop.
4. Start/stop the interaction.
5. Restart your app.

## List of available mobile SDKs

<table>
  <thead>
    <tr>
      <th style={{ width: "300px" }}>
        If you want to...
      </th>

      <th>
        Do this
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td id="crash-analysis">
        Track app activity that may be helpful for troubleshooting crashes
      </td>

      <td>
        Android: [`recordBreadcrumb`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/recordbreadcrumb)
        iOS: 
      </td>
    </tr>

    <tr>
      <td id="creating">
        Track a method as an interaction
      </td>

      <td>
        See [`startInteraction`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/startinteraction-android-agent-api).
      </td>
    </tr>

    <tr>
      <td id="naming">
        Name or rename an interaction
      </td>

      <td>
        See [`setInteractionName`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/setinteractionname-android-agent-api).
      </td>
    </tr>

    <tr>
      <td id="ending">
        End an interaction
      </td>

      <td>
        See [`endInteraction`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/endinteraction-android-agent-api).
      </td>
    </tr>

    <tr>
      <td>
        Disable or enable all interactions
      </td>

      <td>
        See [`withInteractionTracing`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/withinteractiontracing-android-agent-api).
      </td>
    </tr>

    <tr>
      <td>
        Set an app version associated with an interaction
      </td>

      <td>
        See [`withApplicationVersion`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/withapplicationversion-android-agent-api).
      </td>
    </tr>

    <tr>
      <td>
        Set custom build ID
      </td>

      <td>
        See [`withApplicationBuild`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/withapplicationbuild-android-agent-api).
      </td>
    </tr>

    <tr>
      <td id="create-custom">
        Create custom metrics
      </td>

      <td>
        See [`recordMetric`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/recordmetric-android-agent-api).
      </td>
    </tr>

    <tr>
      <td id="attributes-events-insights">
        Report custom attributes and events
      </td>

      <td>
        There are several ways to add custom attributes and events. For more about which would be the best method to use and why, see [Add custom data](/docs/mobile-monitoring/new-relic-mobile/maintenance/add-custom-data-new-relic-mobile).

        * Create an attribute: [`setAttribute`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/setattribute-android-agent-api)
        * Increment an attribute count: [`incrementAttribute`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/incrementattribute-android-agent-api)
        * Remove an attribute: [`removeAttribute`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/removeattribute-android-agent-api)
        * Remove all attributes: [`removeAllAttributes`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/removeallattributes-android-agent-api)
        * Record custom event: [`recordCustomEvent`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/recordevent-android-agent-api)
        * Record a breadcrumb event: [`recordBreadcrumb`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/recordbreadcrumb)
        * Set the maximum size of an event pool: [`setMaxEventPoolSize`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/setmaxeventpoolsize-android-agent-api)
        * Set maximum time agent stores events in memory: [`setMaxEventBufferTime`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/setmaxeventbuffertime-android-agent-api)
        * Return the current session's ID: [`currentSessionId`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/currentsessionid-android-agent-api)
        * Set custom user ID for associating sessions with events and attributes: [`setUserId`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/setuserid-android-agent-api)
      </td>
    </tr>

    <tr>
      <td id="track-custom">
        Track custom network requests and failures
      </td>

      <td>
        Use these methods:

        * Record HTTP transactions at varying levels of detail: See [`noticeHttpTransaction`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/noticehttptransaction-android-agent-api).
        * Record network failures: See [`noticeNetworkFailure`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/noticenetworkfailure-android-agent-api).
      </td>
    </tr>

    <tr>
      <td>
        Record a handled exception as an event, including context
      </td>

      <td>
        See `recordHandledException()`.
      </td>
    </tr>

    <tr>
      <td>
        Record JavaScript errors from ReactNative apps
      </td>

      <td>
        See [`recordJSErrorException`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/record-jserror-exception).
      </td>
    </tr>

    <tr>
      <td>
        Set app launch time target activity
      </td>

      <td>
        See [`withLaunchActivityName`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/with-launch-activity-name).
      </td>
    </tr>

    <tr>
      <td>
        Shut down agent
      </td>

      <td>
        See [`shutdown`](/docs/mobile-monitoring/new-relic-mobile-android/android-sdk-api/shut-down).
      </td>
    </tr>
  </tbody>
</table>

## Manual cross application tracing [#manual-cat]

The `noticeHttpTransaction` code does not automatically append the appropriate header ID value needed to get [cross application tracing](/docs/apm/traces/cross-application-traces/cross-application-tracing) to work. This is why you will not see the application link in your Android app on New Relic's [**Map** page](/docs/mobile-monitoring/mobile-monitoring-ui/network-dashboards/map-dashboard-mobile-apps) for mobile apps or on the [**HTTP requests** page](/docs/mobile-monitoring/mobile-monitoring-ui/network-dashboards/http-requests-dashboard).

You can use a public method in the New Relic Android SDK to get the appropriate ID to pass along with your HTTP request to your backend application, as long as it is already instrumented by New Relic. The appropriate header ID will be passed from the backend application in the response, providing everything needed for cross application tracing to function.

<CollapserGroup>
  <Collapser
    id="example-title"
    title="Cross application tracing example"
  >
    This example adds the `NewRelic-ID` to the backend HTTP request, with `conn` as the external HTTP connection. (Notice the additional import.)

    ```
    import com.newrelic.agent.android.NewRelic;
    import com.newrelic.agent.android.Agent; //required for getCrossProcessId()
    ...
    ...

    //new method for appending the crossProcessID necessary for CAT in New Relic
    public static void setCrossProcessHeader(HttpURLConnection conn) {
        String crossProcessId = Agent.getCrossProcessId(); // API call into the agent for the X-NewRelic-ID
        if (crossProcessId != null) {
            conn.setRequestProperty("X-NewRelic-ID", crossProcessId);
        }
    }
    ```

    After adding the appropriate header to the request to the backend app, the response from the app needs to be parsed for the `X-Newrelic-App-Data` header, and then added to the `noticeHttpTransaction` call as a string. For example:

    ```
    //NewRelic.noticeHttpTransaction(url, httpMethod, statusCode, startTimeMs, endTimeMs, bytesSent, bytesReceived, responseBody, params, response);
    //Where xNewRelicAppDataHeader is the value of the X-NewRelic-App-Data header
    NewRelic.noticeHttpTransaction("http://api.newrelic.com", "GET", 200, System.nanoTime(), System.nanoTime(),100 ,100, "Test", new HashMap<String, String>(), xNewRelicAppDataHeader);
    ```
  </Collapser>
</CollapserGroup>

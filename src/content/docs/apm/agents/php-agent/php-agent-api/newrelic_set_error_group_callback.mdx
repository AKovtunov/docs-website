---
title: newrelic_set_error_group_callback (PHP agent API)
type: apiDoc
shortDescription: This method allows a user to define a custom callback function to generate error group names.
tags:
  - Agents
  - PHP agent
  - PHP agent API
metaDescription: 'Use this API to register a callback which returns a custom error group name.'
redirects:
  - /docs/agents/php-agent/php-agent-api/newrelic_set_error_group_callback
---

Group errors with your own custom-defined fingerprinting callback function.

## Syntax

```php
newrelic_set_error_group_callback($callback)
```

## Requirements

Agent version 10.12 or higher.

## Description

This API allows a user to register a custom callback function with the PHP Agent that will be called when the application encounters an error.

The callback will provided two PHP arrays from the Agent- one containing transaction data, another containing error data.

Using the provided context information, the callback must return a non-empty string based on user-defined logic that will serve as the error group name displayed in the Errors Inbox UI.

<Callout variant="important">
  - When there are multiple calls to this function in a single transaction, the PHP agent retains the callback from the last call only.

  - Callbacks are registered on a per-request basis. A callback should be registered in a code path that is guaranteed to be executed for each request, or it will not be invoked.
</Callout>

## Parameters

This function accepts only a single parameter. You must pass in a function-type argument that accepts 2 parameters.

<table>
  <thead>
    <tr>
      <th width="25%">
        API Parameter
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$callback` (_function_)
      </td>

      <td>
        Required. Provide a callback function that will be registered with the PHP Agent.
      </td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th width="25%">
        Callback Parameters
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `$txndata` (_array_)
      </td>

      <td>
        Required. An array of transaction data provided to your callback by the PHP Agent.
      </td>
    </tr>
    <tr>
     <td>
       `$errdata` (_array_)
     </td>
     <td>
       Required. An array of error data provided to your callback by the PHP Agent.
     </td>
    </tr>
  </tbody>
</table>

### Array Key/Value pairs

#### `$txndata` - PHP Agent transaction data provided to your callback

<table>
  <thead>
    <tr>
      <th width="25%">
        Key
      </th>
      <th>
        Value
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        "request_uri"
      </td>
      <td>
        (_string_) Request URI
      </td>
    </tr>
    <tr>
      <td>
        "path"
      </td>
      <td>
        (_string_) Filepath
      </td>
    </tr>
    <tr>
      <td>
        "method"
      </td>
      <td>
        (_string_) HTTP method (`GET`, `POST`, etc.)
      </td>
    </tr>
    <tr>
      <td>
        "status_code"
      </td>
      <td>
        (_int_) HTTP status code (`200`, `404`, etc.)
      </td>
    </tr>
  </tbody>
</table>

#### `$errdata` - PHP Agent error data provided to your callback

<table>
  <thead>
    <tr>
      <th width="25%">
        Key
      </th>
      <th>
        Value
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        "klass"
      </td>
      <td>
        (_string_) Class name
      </td>
    </tr>
    <tr>
      <td>
        "message"
      </td>
      <td>
        (_string_) Error message
      </td>
    </tr>
    <tr>
      <td>
        "file"
      </td>
      <td>
        (_string_) Filepath
      </td>
    </tr>
    <tr>
      <td>
        "stack"
      </td>
      <td>
        (_string_) JSON error strack trace
      </td>
    </tr>
  </tbody>
</table>

<Callout variant="important">
  - Not all keys are guaranteed to contain values. This is highly dependent on the user application and the nature of the error.
  
  - Array keys will always be set regardless of whether or not they contain empty values.
</Callout>

## Return values

Must return a non-empty string or the error group name will not be set.

## Examples

```php
$callback = function(array $txndata, array $errdata) 
{
    // custom code to parse array data
    $fingerprint = "YOUR CUSTOM ERROR GROUP NAME";
    return $fingerprint;    // non-empty string error group name
};

newrelic_set_error_group_callback($callback);
```

---
title: Set up network syslog monitoring
tags:
  - Integrations
  - Network monitoring
  - Installation
  - Setup
metaDescription: Set up network syslog monitoring.
---

import networkSyslogGuidedInstall from 'images/network_screenshot-full_syslog-guided-install.webp'

Set up the network syslog monitoring agent using our guided install process.

<ButtonLink
  data-tessen="stitchedPathLinkClick"
  role="button"
  to="https://one.newrelic.com/nr1-core?state=54f01c23-f42c-3984-f6c8-06f2fd6954bc"
  variant="primary"
>
  Add network syslog data
</ButtonLink>

## Prerequisites [#prerequisites]

* A New Relic account. If you haven't already, sign up for free! No credit card required.

<InlineSignup/>

* If you choose to install the agent manually, you also need: 
  * A New Relic [account ID](/docs/accounts/accounts-billing/account-setup/account-id).
  * A New Relic <InlinePopover type="licenseKey" />.

### Docker prerequisites [#prerequisites-docker]

We recommend using a Docker container to deploy the agent for syslog message collection. To use it, you need:

* [Docker](https://docs.docker.com/engine/install) installed in a Linux host
* Ability to launch new containers via command line
* Network access as defined in the [network prerequisites](/docs/network-performance-monitoring/setup-performance-monitoring/snmp-performance-monitoring#prerequisites-network)

### Linux host prerequisites [#prerequisites-linux-host]

If you're using Linux to install the agent as a service, you need:

* SSH access to the host
* Access to install/remove applications and services
* Network access as defined in the [network prerequisites](/docs/network-performance-monitoring/setup-performance-monitoring/snmp-performance-monitoring#prerequisites-network)
* One of these supported operating systems:
    * CentOS 7
    * CentOS 8
    * Debian 12 (Bookworm)
    * Debian 11 (Bullseye)
    * Debian 10 (Buster)
    * RedHat Enterprise Linux 9
    * Ubuntu 20.04 (Focal LTS)
    * Ubuntu 22.04 (Jammy LTS)
    * Ubuntu 23.04 (Lunar)

<Callout variant="important">
  To receive syslog messages, the agent must bind to UDP 514. In a host-based install, the following command will be included during the install process. When executed, KTranslate will be run with elevated privileges.
  
  `sudo setcap cap_net_bind_service=+ep /usr/bin/ktranslate`
</Callout>

### Network syslog devices prerequisites [#prereqs-network-syslog-devices]

<Callout variant="important">
  `ktranslate` handles syslog in the following formats: [RFC3164](https://datatracker.ietf.org/doc/html/rfc3164), [RFC5424](https://datatracker.ietf.org/doc/html/rfc5424), and [RFC6587](https://datatracker.ietf.org/doc/html/rfc6587). Any messages received outside of these formats will be discarded.
</Callout>

* Source devices must be configured to send syslog messages to the host running the network monitoring agent. Here's how to configure network syslog data collection in some devices (this is not an all-inclusive list):
  * [Checkpoint - Security Gateway](https://sc1.checkpoint.com/documents/R80.40/WebAdminGuides/EN/CP_R80.40_LoggingAndMonitoring_AdminGuide/Topics-LMG/Working-with-Syslog-Servers.htm). You must sign in to the User Center/PartnerMAP checkpoint.
  * [Cisco - ASA](https://www.cisco.com/c/en/us/support/docs/security/pix-500-series-security-appliances/63884-config-asa-00.html)
  * [Cisco - IOS](https://community.cisco.com/t5/networking-documents/how-to-configure-logging-in-cisco-ios/ta-p/3132434)
  * [Cisco - Meraki](https://documentation.meraki.com/General_Administration/Monitoring_and_Reporting/Syslog_Server_Overview_and_Configuration)
  * [Cisco - NX-OS](https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/6-x/system_management/configuration/guide/_Cisco_Nexus_9000_Series_NX-OS_System_Management_Configuration_Guide/sm_5syslog.html)
  * [F5 - BIG-IP](https://support.f5.com/csp/article/K13080)
  * [Fortinet Fortigate](https://help.fortinet.com/fadc/4-5-1/olh/Content/FortiADC/handbook/log_remote.htm)
  * [Juniper - Junos](https://www.juniper.net/documentation/us/en/software/junos/network-mgmt/topics/ref/statement/syslog-edit-system.html)
  * [Palo Alto - PAN-OS](https://docs.paloaltonetworks.com/pan-os/10-1/pan-os-admin/monitoring/use-syslog-for-monitoring/configure-syslog-monitoring.html)

### Network security prerequisites [#prerequisites-network-security]

Check the [network security prerequisites for network syslog](/install/npm).

## Set up network syslog monitoring in New Relic [#setup-network-syslog-monitoring]

<CollapserGroup>
  <Collapser
    id="guided-install-setup"
    title="Guided Installation setup"
  >
    1. Go to **[one.newrelic.com > All capabilities](https://one.newrelic.com/    all-capabilities) > Add more data**.
    2. Scroll down until you see **Network** and click **Syslog**.
    3. Follow the steps outlined in the guided installation process. You can use docker     or linux.

    <img
      title="Syslog guided installation"
      alt="A screenshot depicting the syslog guided installation process"
      src={networkSyslogGuidedInstall}
    />

      <figcaption>
       **[one.newrelic.com > All capabilities](https://one.newrelic.com/    all-capabilities) > Add more data > Network > Syslog** to set up syslog message     monitoring.
      </figcaption>

    Here's a short video (2:56 minutes) showing how to set up network syslog monitoring:

    <Video
      id="8cNJFt2L9M8"
      type="youtube"
    />
  </Collapser>
</CollapserGroup>

<CollapserGroup>
  <Collapser
    id="manual-container-setup"
    title="Manual container setup"
  >
    Before reading about installing the network syslog agent manually, consider using our guided install process to avoid errors:

    <ButtonLink
      data-tessen="stitchedPathLinkClick"
      role="button"
      to="https://one.newrelic.com/nr1-core?state=54f01c23-f42c-3984-f6c8-06f2fd6954bc"
      variant="primary"
    >
      Add network syslog data
    </ButtonLink>

    If you follow this manual installation process, support may be unable to assist you if issues arise. If you still wish to proceed, do the following:

    1. On a Linux host with Docker installed, download the **ktranslate** image by running one of the following:

      * [Docker Hub](https://hub.docker.com/)
        ```shell
        docker pull kentik/ktranslate:v2
        ```
      * [Quay.io](https://quay.io/)
        ```shell
        docker pull quay.io/kentik/ktranslate:v2
        ```

    2. Copy the `snmp-base.yaml` file to the local `$HOME` directory of your Docker user, and discard the container by running

      ```shell
      cd .
      id=$(docker create kentik/ktranslate:v2)
      docker cp $id:/etc/ktranslate/snmp-base.yaml .
      docker rm -v $id
      ```

    3. Edit the `snmp-base.yaml` file, and add your network syslog devices inside the `devices` dictionary key with the following structure:

      ```yaml
      devices:
        # This key and the corresponding 'device_name'
        # need to be unique for each device
        edge_router:
          device_name: edge_router
          device_ip: 10.10.1.254
          ping_only: true
          # Optional user tags
          user_tags:
            owning_team: net_eng
            environment: production
      ```

      <Callout variant="important">
        If you're already monitoring SNMP data devices that will also send network syslog, you'll want to ensure that the value for `device_name` is identical for both configuration files to ensure the syslog messages are attributed to the right entity in the New Relic UI.
      </Callout>

    4. Run `ktranslate` to listen for network syslog messages by running:

      ```shell
      docker run -d --name ktranslate-syslog --restart unless-stopped --pull=always -p 2:1620/udp \
      -v `pwd`/snmp-base.yaml:/snmp-base.yaml \
      # Replace with your license key
      -e NEW_RELIC_API_KEY=$YOUR_NR_LICENSE_KEY \
      kentik/ktranslate:v2 \
        -snmp /snmp-base.yaml \
        # Replace with your account ID
        -nr_account_id=$YOUR_NR_ACCOUNT_ID \
        # If your organization is located in Europe, add the following flag:
        # -nr_region=EU \
        # If you want to use FedRAMP, add the following flag to use the FedRAMP authorized endpoints:
        # -nr_region=GOV \
        -metrics=jchf \
        -tee_logs=true \
        # Use this field to create a unique value for `tags.container_service` inside of New Relic
        -service_name=$UNIQUE_NAME \
        # Optional: To override the default listening port of "0.0.0.0:5143":
        # -syslog.source="<ip_address>:<port>" \
        # Optional: To set a custom DNS server for IP resolution
        # -dns="$DNS_SERVER" \
        nr1.syslog
      ```
    
    5. Investigate your device syslog messages in the New Relic <InlinePopover type="logs" /> UI, using the following query:

      ```sql
      "plugin.type":"ktranslate-syslog"
      ```
  </Collapser>
</CollapserGroup>

<InstallFeedback />

To get better visibility into your network device performance, [set up SNMP data monitoring](/docs/network-performance-monitoring/setup-performance-monitoring/snmp-performance-monitoring).

To get better visibility into how your network is being used, [set up network flow data monitoring](/docs/network-performance-monitoring/setup-performance-monitoring/network-flow-monitoring).
